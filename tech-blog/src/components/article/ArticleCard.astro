---
import type { Post } from '../../lib/types/content'
import TagList from './TagList.astro'

interface Props {
  post: Post
}

const { post } = Astro.props

// 概要は150文字に制限
const truncatedDescription =
  post.description.length > 150 ? `${post.description.slice(0, 150)}...` : post.description

// 日付をフォーマット
const formatDate = (date: Date) => {
  return new Intl.DateTimeFormat('ja-JP', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  }).format(date)
}
---

<article
  class="border-b pb-6 pt-6 first:pt-0"
  style="border-color: var(--color-border)"
>
  <a href={`/posts/${post.slug}`} class="block mb-4 hoverable-area -mx-4 px-4 rounded">
    <h2 class="text-2xl font-bold mb-2 hover:text-accent transition-colors">
      {post.title}
    </h2>

    <time
      datetime={post.publishedAt.toISOString()}
      class="text-sm mb-3 block"
      style="color: var(--color-text-sub)"
    >
      {formatDate(post.publishedAt)}
    </time>

    <p class="mb-0" style="color: var(--color-text-sub)">
      {truncatedDescription}
    </p>
  </a>

  <TagList tags={post.tags} maxDisplay={3} />
</article>

<style>
  .hover\:text-accent:hover {
    color: var(--color-accent);
  }
</style>
