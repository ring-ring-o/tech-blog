---
import ThemeToggle from '../ThemeToggle.astro'
---

<header class="sticky top-0 z-50 border-b bg-white/80 backdrop-blur-sm dark:bg-gray-900/80" style="border-color: var(--color-border)" data-pagefind-ignore>
  <nav class="container mx-auto flex items-center justify-between px-4 py-4">
    <!-- Logo -->
    <a href="/" class="text-xl font-bold hover:opacity-80 transition-opacity" style="color: var(--color-accent)">
      Tech Blog
    </a>

    <!-- Desktop Navigation -->
    <div class="hidden md:flex items-center gap-6">
      <a href="/" class="hover:text-accent transition-colors">記事</a>
      <a href="/about" class="hover:text-accent transition-colors">About</a>
      <a href="/tags" class="hover:text-accent transition-colors">タグ</a>
      <a href="/search" class="hover:text-accent transition-colors" aria-label="検索">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </a>
      <ThemeToggle />
    </div>

    <!-- Mobile Menu Button -->
    <button
      id="mobile-menu-button"
      class="md:hidden p-2"
      aria-label="メニューを開く"
      aria-expanded="false"
      aria-controls="mobile-menu"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </nav>

  <!-- Mobile Navigation -->
  <div id="mobile-menu" class="hidden md:hidden border-t px-4 py-4" style="border-color: var(--color-border)">
    <div class="flex flex-col gap-4">
      <a href="/" class="hover:text-accent transition-colors">記事</a>
      <a href="/about" class="hover:text-accent transition-colors">About</a>
      <a href="/tags" class="hover:text-accent transition-colors">タグ</a>
      <a href="/search" class="hover:text-accent transition-colors">検索</a>
      <div class="pt-2 border-t" style="border-color: var(--color-border)">
        <ThemeToggle />
      </div>
    </div>
  </div>
</header>

<script>
  const button = document.getElementById('mobile-menu-button')
  const menu = document.getElementById('mobile-menu')

  button?.addEventListener('click', () => {
    const isHidden = menu?.classList.toggle('hidden')
    button?.setAttribute('aria-expanded', isHidden ? 'false' : 'true')
    button?.setAttribute('aria-label', isHidden ? 'メニューを開く' : 'メニューを閉じる')
  })
</script>

<style>
  .hover\:text-accent:hover {
    color: var(--color-accent);
  }
</style>
