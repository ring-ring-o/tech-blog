---
import BaseLayout from '../../layouts/BaseLayout.astro'
import { contentRepository } from '../../lib/repositories'

const tags = await contentRepository.getAllTags()
---

<BaseLayout
  title="タグ一覧"
  description="技術ブログのタグ一覧 - 興味のあるトピックから記事を探す"
>
  <div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold mb-8">タグ一覧</h1>

    <p class="mb-8" style="color: var(--color-text-sub)">
      タグをクリックすると、そのタグが付けられた記事の一覧を表示します。
    </p>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {tags.map((tag) => (
        <a
          href={`/tags/${encodeURIComponent(tag.name)}`}
          class="tag-card border rounded-lg p-6 hover:shadow-lg transition-all"
          style="background-color: var(--color-card-bg); border-color: var(--color-border)"
        >
          <div class="flex items-center justify-between">
            <h2 class="text-xl font-bold">{tag.name}</h2>
            <span
              class="text-2xl font-bold"
              style="color: var(--color-accent)"
            >
              {tag.count}
            </span>
          </div>
          <p class="text-sm mt-2" style="color: var(--color-text-sub)">
            {tag.count}件の記事
          </p>
        </a>
      ))}
    </div>

    {tags.length === 0 && (
      <div class="text-center py-12">
        <p style="color: var(--color-text-sub)">
          タグが見つかりませんでした。
        </p>
      </div>
    )}
  </div>
</BaseLayout>

<style>
  .tag-card:hover {
    border-color: var(--color-accent);
  }
</style>
